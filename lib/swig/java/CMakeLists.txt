#
# Copyright (c) 2013 Nicholas Corgan (n.corgan@gmail.com)
#
# Distributed under the MIT License (MIT) (See accompanying file LICENSE.txt
# or copy at http://opensource.org/licenses/MIT)
#

INCLUDE(${SWIG_USE_FILE})

FILE(TO_NATIVE_PATH "${PKMNSIM_SOURCE_DIR}/lib/swig" PKMNSIM_SWIG_SOURCE_DIR)
SET(PKMNSIM_SWIG_SOURCE_DIR ${PKMNSIM_SWIG_SOURCE_DIR} CACHE FILEPATH "Pokemon-sim SWIG source directory")

SET(PKMNSIM_JAVA_INCLUDE_DIRS
    ${PKMNSIM_SOURCE_DIR}/include
    ${PKMNSIM_SWIG_SOURCE_DIR}
    ${Boost_INCLUDE_DIRS}
)

FOREACH(dir ${PKMNSIM_JAVA_INCLUDE_DIRS})
    LIST(APPEND CMAKE_SWIG_FLAGS "-I${dir}")
ENDFOREACH(dir ${PKMNSIM_JAVA_INCLUDE_DIRS})
SET_SOURCE_FILES_PROPERTIES(jpkmnsim_swig.i PROPERTIES CPLUSPLUS ON)

INCLUDE_DIRECTORIES(${PKMNSIM_JAVA_INCLUDE_DIRS} ${JAVA_INCLUDE_PATH} ${JNI_INCLUDE_DIRS})

SET(JAVA_SOURCE_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/)
SET(JAVA_BINARY_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/build)
FILE(MAKE_DIRECTORY ${JAVA_SOURCE_DIRECTORY})
FILE(MAKE_DIRECTORY ${JAVA_BINARY_DIRECTORY})

SET(CMAKE_SWIG_OUTDIR ${JAVA_SOURCE_DIRECTORY}/org/nc/jPKMNsim)
SET(CMAKE_SWIG_FLAGS -module jPKMNsim -package "org.nc.jPKMNsim" ${CMAKE_GLOBAL_SWIG_FLAGS})
SWIG_ADD_MODULE(jPKMNsim java jpkmnsim_swig.i)
SWIG_LINK_LIBRARIES(jPKMNsim pkmnsim)
IF(UNIX)
    SET_TARGET_PROPERTIES(${SWIG_MODULE_jPKMNsim_REAL_NAME} PROPERTIES PREFIX "lib")
    SET_TARGET_PROPERTIES(${SWIG_MODULE_jPKMNsim_REAL_NAME} PROPERTIES SUFFIX ".so")
    SET_TARGET_PROPERTIES(${SWIG_MODULE_jPKMNsim_REAL_NAME} COMPILE_FLAGS "-std=c++0x")
ELSEIF(WIN32)
    SET_TARGET_PROPERTIES(${SWIG_MODULE_jPKMNsim_REAL_NAME} PROPERTIES PREFIX "")
    SET_TARGET_PROPERTIES(${SWIG_MODULE_jPKMNsim_REAL_NAME} PROPERTIES SUFFIX ".dll")
ENDIF(UNIX)